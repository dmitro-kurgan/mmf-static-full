!function($){$.fn.quovolver=function(options){"use strict";var opts=$.extend({},$.fn.quovolver.defaults,options);return this.each(function(){function gotoItem(itemNumber){if($items.is(":animated")||$this.is(":animated"))return!1;if($box.is(":hidden"))return!1;itemNumber<1?itemNumber=$total:itemNumber>$total&&(itemNumber=1);var gotoData={current:$($items[$active-1]),upcoming:$($items[itemNumber-1])};return gotoData.currentHeight=getHiddenProperty(gotoData.current,"height"),gotoData.upcomingHeight=getHiddenProperty(gotoData.upcoming,"height"),gotoData.currentOuterHeight=getHiddenProperty(gotoData.current,"outerHeight"),gotoData.upcomingOuterHeight=getHiddenProperty(gotoData.upcoming,"outerHeight"),gotoData.currentWidth=getHiddenProperty(gotoData.current,"width"),gotoData.upcomingWidth=getHiddenProperty(gotoData.upcoming,"width"),gotoData.currentOuterWidth=getHiddenProperty(gotoData.current,"outerWidth"),gotoData.upcomingOuterWidth=getHiddenProperty(gotoData.upcoming,"outerWidth"),"basic"!==o.transition&&"string"===typeof o.transition&&"function"===eval("typeof "+o.transition)?eval(o.transition+"(gotoData)"):basic(gotoData),$active=itemNumber,updateNavNum($nav),updateNavText($nav),!1}function buildNav(){var a;if(("above"===o.navPosition||"both"===o.navPosition)&&($box.prepend('<div class="quovolve-nav quovolve-nav-above"></div>'),a=$box.find(".quovolve-nav")),("below"===o.navPosition||"both"===o.navPosition)&&($box.append('<div class="quovolve-nav"></div>'),a=$box.find(".quovolve-nav")),"custom"===o.navPosition&&""!==o.navPositionCustom&&0!==$(o.navPositionCustom).length&&($(o.navPositionCustom).append('<div class="quovolve-nav quovolve-nav-custom"></div>'),a=$(o.navPositionCustom).find(".quovolve-nav")),o.navPrev&&a.append('<span class="nav-prev"><a href="#">'+o.navPrevText+"</a></span>"),o.navNext&&a.append('<span class="nav-next"><a href="#">'+o.navNextText+"</a></span>"),o.navNum){a.append('<ol class="nav-numbers"></ol>');for(var b=1;b<$total+1;b++)a.find(".nav-numbers").append('<li><a href="#item-'+b+'">'+b+"</a></li>");updateNavNum(a)}return o.navText&&(a.append('<span class="nav-text"></span>'),updateNavText(a)),a}function getHiddenProperty(a,b){var c=a[b]();if("outerHeight"===b&&(c=a.outerHeight(!1)),"outerWidth"===b&&(c=a.outerWidth(!1)),!c||0==c){var d=a.parents().andSelf().filter(":hidden");d.each(function(){this.oDisplay=this.style.display,$(this).show()});var c=a[b]();d.each(function(){this.style.display=this.oDisplay})}return c}function equalHeight(a){var b=0;a.height("auto"),a.each(function(){var a;a=$(this).is(":visible")?$(this).height():getHiddenProperty($(this),"height"),a>b&&(b=a)}),a.height(b)}function updateNavNum(a){o.navEnabled&&(a.find(".nav-numbers li").removeClass("active"),a.find('.nav-numbers a[href="#item-'+$active+'"]').parent().addClass("active"))}function updateNavText(a){if(o.navEnabled){var b=o.navTextContent.replace("@a",$active).replace("@b",$total);a.find(".nav-text").text(b)}}function autoPlay(){var a="auto"==o.autoPlaySpeed?25*$items[$active-1].textLength+2e3:o.autoPlaySpeed;clearTimeout($intervalID),$intervalID=setTimeout(function(){gotoItem($active+1),autoPlay()},a)}function pauseAutoPlay(){o.stopAutoPlay!==!0&&$box.hover(function(){$box.addClass("pause").removeClass("play"),clearTimeout($intervalID)},function(){$box.removeClass("pause").addClass("play"),clearTimeout($intervalID),autoPlay()})}function stopAutoPlay(){$box.hover(function(){$box.addClass("stop").removeClass("play"),clearTimeout($intervalID)},function(){})}function goToAndPlay(a){clearTimeout($intervalID),gotoItem(a),o.autoPlay&&autoPlay()}function basic(a){$this.css("height",a.upcomingOuterHeight),a.current.hide(),a.upcoming.show(),o.equalHeight===!1&&$this.css("height","auto")}function fade(a){$this.height(a.currentOuterHeight),a.current.fadeOut(o.transitionSpeed,function(){$this.animate({height:a.upcomingOuterHeight},o.transitionSpeed,function(){a.upcoming.fadeIn(o.transitionSpeed,function(){$this.height("auto")})})})}var $this=$(this),o=$.meta?$.extend({},opts,$this.data()):opts;$this.addClass("quovolve").css({position:"relative"});var groupMethod;groupMethod=o.children?"find":"children";var $box=$this,$items=$this[groupMethod](o.children),$active=1,$total=$items.length;if($items.hide().filter(":first").show(),o.navPrev||o.navNext||o.navNum||o.navText){o.navEnabled=!0;var $nav=buildNav()}else o.navEnabled=!1;if(o.equalHeight&&(equalHeight($items),$(window).resize(function(){equalHeight($items),$this.css("height",$($items[$active-1]).outerHeight())})),o.autoPlay){"auto"==o.autoPlaySpeed&&$items.each(function(){this.textLength=$(this).text().length});var $intervalID;autoPlay(),o.stopOnHover?stopAutoPlay():o.pauseOnHover&&pauseAutoPlay()}$(".nav-prev a",$box).click(function(){return goToAndPlay($active-1),!1}),$(".nav-next a",$box).click(function(){return goToAndPlay($active+1),!1}),$(".nav-numbers a",$box).click(function(){return goToAndPlay($(this).text()),!1}),$(this).bind("goto",function(a,b){goToAndPlay(b)})})},$.fn.quovolver.defaults={children:"",transition:"fade",transitionSpeed:300,autoPlay:!0,autoPlaySpeed:"auto",pauseOnHover:!0,stopOnHover:!1,equalHeight:!0,navPosition:"above",navPositionCustom:"",navPrev:!1,navNext:!1,navNum:!1,navText:!1,navPrevText:"Prev",navNextText:"Next",navTextContent:"@a / @b"}}(jQuery);